---
interface Repo {
  id: number;
  name: string;
  html_url: string;
  description: string;
  homepage: string | null;
  stargazers_count: number;
}

const response = await fetch('https://api.github.com/users/theabhisheksrivastav/repos');
const data = await response.json();

let allRepos: Repo[] = Array.isArray(data) ? data : [];


// Only feature repos with at least 1 star
const featuredProjects = allRepos.filter(repo => repo.stargazers_count >= 1);
---

<section id="featured-projects" class="py-16 px-6 md:px-20 bg-[var(--layout-background)] text-[var(--text-primary)]">
  <div class="max-w-6xl mx-auto">
    <!-- Section Header -->
    <div class="flex items-center mb-10">
      <span class="w-3 h-10 bg-[var(--accent-primary)] mr-4 rounded"></span>
      <h2 class="text-3xl md:text-4xl font-bold">Featured Projects</h2>
    </div>

    <!-- Projects Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      {featuredProjects.slice(0, 4).map(repo => (
        <a 
          href={repo.homepage || repo.html_url}
          target="_blank"
          rel="noopener noreferrer"
          class="block bg-[var(--layout-accent)] rounded-2xl p-6 shadow-lg hover:shadow-[var(--accent-primary)]/30 hover:-translate-y-2 transition-all duration-300 group"
          aria-label={`View ${repo.name} on GitHub`}
        >
          <div class="flex flex-col h-full">
            <!-- Repo Name -->
            <h3 class="text-2xl font-bold mb-3 text-[var(--text-primary)]">
              {repo.name}
            </h3>

            <!-- Repo Description -->
            <p class="opacity-80 flex-grow">
              {repo.description || "No description provided."}
            </p>

            <!-- Hover Action -->
            <div class="mt-6">
              <span class="text-[var(--accent-primary)] font-semibold opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                View on GitHub â†’
              </span>
            </div>
          </div>
        </a>
      ))}
    </div>
    <div class="flex justify-center mt-8">
  <a href="#contact" class="flex items-center justify-center px-6 py-3 bg-[var(--accent-primary)] text-white font-semibold rounded-lg hover:bg-[var(--color-primary)] hover:text-[var(--color-secondary)] transition gap-2">
    <i class="fa-regular fa-circle-right"></i>
    Portfolio & Projects
  </a>
</div>
  </div>
</section>
